.sidebar{position:fixed;left:0;top:0;height:100vh;width:240px;background:var(--bg-secondary);border-right:1px solid var(--border);display:flex;flex-direction:column;transition:width .3s ease,transform .3s ease;z-index:100}.sidebar.collapsed{width:70px}.sidebar-header{display:flex;align-items:center;justify-content:space-between;padding:20px 16px;border-bottom:1px solid var(--border)}.sidebar-logo{display:flex;align-items:center;gap:12px;overflow:hidden}.logo-icon{font-size:1.8rem;font-weight:700;color:var(--primary);min-width:38px;text-align:center}.logo-text{font-size:1.4rem;font-weight:700;color:var(--text);white-space:nowrap}.collapse-btn{background:transparent;border:1px solid var(--border);border-radius:6px;color:var(--muted);cursor:pointer;padding:6px 10px;font-size:.9rem;transition:all .2s ease}.collapse-btn:hover{background:var(--bg-tertiary);color:var(--text);border-color:var(--primary)}.sidebar.collapsed .collapse-btn{display:none}.sidebar-nav{flex:1;padding:16px 12px;display:flex;flex-direction:column;gap:8px}.nav-item{display:flex;align-items:center;gap:12px;padding:12px 16px;background:transparent;border:none;border-radius:8px;color:var(--text-secondary);cursor:pointer;font-size:.95rem;text-align:left;transition:all .2s ease;width:100%}.nav-item:hover{background:var(--bg-tertiary);color:var(--text)}.nav-item.active{background:linear-gradient(135deg,var(--primary-dark),var(--primary));color:var(--darker);font-weight:600}.nav-icon{font-size:1.2rem;min-width:24px;text-align:center}.nav-label{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.sidebar.collapsed .nav-item{justify-content:center;padding:12px}.sidebar.collapsed .nav-label{display:none}.sidebar-footer{padding:16px;border-top:1px solid var(--border)}.sidebar-tagline{font-size:.75rem;color:var(--muted);text-align:center;margin:0}.mobile-menu-toggle{display:none;position:fixed;top:12px;left:12px;z-index:150;background:var(--bg-tertiary);border:1px solid var(--border);border-radius:8px;padding:8px;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 8px #0003}.mobile-menu-toggle:hover{background:var(--bg-secondary);border-color:var(--primary)}.hamburger{display:flex;flex-direction:column;gap:4px;width:18px}.hamburger span{display:block;height:2px;background:var(--text);border-radius:2px;transition:all .3s ease}.hamburger.open span:nth-child(1){transform:rotate(45deg) translate(4px,4px)}.hamburger.open span:nth-child(2){opacity:0}.hamburger.open span:nth-child(3){transform:rotate(-45deg) translate(4px,-4px)}.sidebar-backdrop{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:#00000080;z-index:90}.desktop-only{display:block}@media (max-width: 1024px){.sidebar{width:200px}.sidebar.collapsed{width:60px}}@media (max-width: 768px){.sidebar{transform:translate(-100%);width:280px}.sidebar.collapsed{width:280px}.sidebar.mobile-open{transform:translate(0)}.mobile-menu-toggle{display:flex;align-items:center;justify-content:center}.simulation-page~.mobile-menu-toggle,body:has(.simulation-page) .mobile-menu-toggle{display:none}.sidebar-backdrop{display:block}.desktop-only{display:none}.sidebar.collapsed .nav-item{justify-content:flex-start;padding:12px 16px}.sidebar.collapsed .nav-label{display:inline}}@media (max-width: 480px){.mobile-menu-toggle{top:10px;left:10px;padding:7px}.hamburger{width:16px;gap:3px}.sidebar,.sidebar.collapsed{width:85%;max-width:300px}}.app-layout{display:flex;min-height:100vh;min-height:100dvh;height:100vh;height:100dvh;overflow:hidden}.main-content-area{flex:1;margin-left:240px;padding:20px;max-width:calc(100% - 240px);transition:margin-left .3s ease,max-width .3s ease}.sidebar.collapsed~.main-content-area,.app-layout:has(.sidebar.collapsed) .main-content-area{margin-left:70px;max-width:calc(100% - 70px)}@media (max-width: 1024px){.main-content-area{margin-left:200px;max-width:calc(100% - 200px)}.app-layout:has(.sidebar.collapsed) .main-content-area{margin-left:60px;max-width:calc(100% - 60px)}}@media (max-width: 768px){.main-content-area{margin-left:0;max-width:100%;padding:60px 12px 12px;height:100vh;height:100dvh;overflow-y:auto}.main-content-area:has(.simulation-page){padding-top:0;padding-bottom:0}.app-layout:has(.sidebar.collapsed) .main-content-area{margin-left:0;max-width:100%}}@media (max-width: 480px){.main-content-area{padding:56px 8px 8px}.main-content-area:has(.simulation-page){padding-top:0}}.header{display:flex;justify-content:space-between;align-items:center;padding:20px 0;border-bottom:1px solid var(--border-color);margin-bottom:20px}.header-left{text-align:left}.header h1{color:var(--primary);font-size:2em;margin-bottom:5px}.header p{color:var(--text-secondary)}.header-right{display:flex;align-items:center}.admin-link{background:var(--bg-tertiary);border:1px solid var(--border);border-radius:8px;color:var(--text);padding:10px 18px;cursor:pointer;font-size:.9rem;transition:all .2s ease;display:flex;align-items:center;gap:6px}.admin-link:hover{background:var(--primary);color:var(--darker);border-color:var(--primary)}@media (max-width: 768px){.header{flex-direction:row;justify-content:space-between;align-items:center;gap:8px;padding:10px 0 10px 50px;margin-bottom:12px}.header h1{font-size:1.2em}.header p{font-size:.8rem;display:none}.admin-link{padding:8px 12px;font-size:.8rem}}@media (max-width: 480px){.header{padding:8px 0 8px 48px;margin-bottom:8px}.header h1{font-size:1.1em}.admin-link{padding:6px 10px;font-size:.75rem}.admin-link span:last-child{display:none}}.wiki-popup-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:#000c;display:flex;align-items:center;justify-content:center;z-index:1000;animation:fadeIn .2s ease;padding:20px}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.wiki-popup{background:var(--bg-secondary, #1a1a2e);border-radius:12px;max-width:900px;width:100%;max-height:85vh;display:flex;flex-direction:column;border:1px solid var(--border-color, #3a3a3a);box-shadow:0 20px 60px #00000080;animation:slideUp .3s ease}.wiki-popup.wiki-popup-fullsize{max-width:95vw;max-height:95vh;width:95vw;height:95vh}.wiki-popup-header{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;background:var(--header-bg, #252545);border-bottom:1px solid var(--border-color, #3a3a3a);border-radius:12px 12px 0 0}.wiki-popup-title-section{display:flex;align-items:center;gap:10px}.wiki-popup-icon{font-size:1.4rem}.wiki-popup-title{font-weight:600;font-size:1.1rem;color:var(--text-primary, #e0e0e0)}.wiki-popup-close{background:transparent;border:none;color:var(--text-secondary, #888);font-size:1.2rem;cursor:pointer;padding:4px 8px;border-radius:4px;transition:all .2s}.wiki-popup-close:hover{background:#ffffff1a;color:var(--text-primary, #e0e0e0)}.wiki-popup-content{flex:1;overflow-y:auto;padding:20px;min-height:300px}.wiki-popup-content.wiki-popup-content-iframe{padding:0;overflow:auto}.wiki-popup-iframe{width:100%;height:100%;min-height:500px;border:none;background:#121212}.wiki-popup-loading{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:16px;padding:60px 20px;color:var(--text-secondary, #888)}.wiki-loading-spinner{width:40px;height:40px;border:3px solid var(--border-color, #3a3a3a);border-top-color:var(--primary-color, #6366f1);border-radius:50%;animation:spin 1s linear infinite}.wiki-popup-placeholder{text-align:center;padding:60px 20px;color:var(--text-secondary, #888)}.wiki-popup-body{font-size:.95rem;line-height:1.7;color:var(--text-primary, #e0e0e0)}.wiki-popup-body h1{font-size:1.5rem;margin:0 0 1rem;color:var(--text-primary, #e0e0e0);border-bottom:1px solid var(--border-color, #3a3a3a);padding-bottom:.5rem}.wiki-popup-body h2{font-size:1.25rem;margin:1.5rem 0 .75rem;color:var(--text-primary, #e0e0e0)}.wiki-popup-body h3{font-size:1.1rem;margin:1rem 0 .5rem;color:var(--text-primary, #e0e0e0)}.wiki-popup-body p{margin:.75rem 0}.wiki-popup-body ul,.wiki-popup-body ol{margin:.75rem 0;padding-left:1.75rem}.wiki-popup-body li{margin:.35rem 0}.wiki-popup-body code{background:var(--code-bg, #2a2a4a);padding:.15rem .4rem;border-radius:4px;font-family:Monaco,Menlo,Consolas,monospace;font-size:.85em}.wiki-popup-body pre{background:var(--code-bg, #2a2a4a);padding:1rem;border-radius:8px;overflow-x:auto;margin:1rem 0}.wiki-popup-body pre code{background:none;padding:0}.wiki-popup-body strong{font-weight:600;color:var(--text-primary, #e0e0e0)}.wiki-popup-inspiration{background:var(--bg-tertiary, #252545);border:1px solid var(--border-color, #3a3a3a);border-radius:8px;margin:0 20px;padding:14px 16px;flex-shrink:0}.inspiration-header{display:flex;align-items:center;gap:8px;margin-bottom:10px}.inspiration-icon{font-size:1.1rem}.inspiration-title{font-weight:600;color:var(--primary-color, #6366f1);font-size:.9rem}.inspiration-content{display:flex;flex-direction:column;gap:4px}.inspiration-label{font-size:.75rem;color:var(--text-secondary, #888);text-transform:uppercase;letter-spacing:.5px}.inspiration-text{font-size:.85rem;color:var(--text-primary, #e0e0e0);line-height:1.5;background:var(--bg-secondary, #1a1a2e);padding:10px 12px;border-radius:6px;border-left:3px solid var(--primary-color, #6366f1);max-height:100px;overflow-y:auto}.wiki-popup-footer{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;background:var(--header-bg, #252545);border-top:1px solid var(--border-color, #3a3a3a);border-radius:0 0 12px 12px}.wiki-popup-status{font-size:.9rem}.status-ready{color:#22c55e;font-weight:600;animation:pulse-text 1s ease-in-out infinite}@keyframes pulse-text{0%,to{opacity:1}50%{opacity:.7}}.status-loading{display:flex;align-items:center;gap:8px;color:var(--text-secondary, #888)}.mini-spinner{width:14px;height:14px;border:2px solid var(--border-color, #3a3a3a);border-top-color:var(--primary-color, #6366f1);border-radius:50%;animation:spin 1s linear infinite;display:inline-block}.wiki-popup-actions{display:flex;gap:12px}.btn-begin{background:var(--text-secondary, #666);color:#fff;padding:10px 24px;border:none;border-radius:8px;font-weight:600;cursor:not-allowed;transition:all .3s ease}.btn-begin.ready{background:linear-gradient(135deg,#22c55e,#16a34a);cursor:pointer;box-shadow:0 4px 15px #22c55e66}.btn-begin.ready:hover{transform:translateY(-2px);box-shadow:0 6px 20px #22c55e80}.btn-begin.ready.pulse{animation:button-pulse 2s ease-in-out infinite}@keyframes button-pulse{0%,to{box-shadow:0 4px 15px #22c55e66}50%{box-shadow:0 4px 25px #22c55eb3}}.btn-secondary{background:transparent;color:var(--text-secondary, #888);padding:10px 20px;border:1px solid var(--border-color, #3a3a3a);border-radius:8px;cursor:pointer;transition:all .2s}.btn-secondary:hover{background:#ffffff0d;color:var(--text-primary, #e0e0e0)}.wiki-popup-content::-webkit-scrollbar{width:8px}.wiki-popup-content::-webkit-scrollbar-track{background:var(--scrollbar-track, #1a1a2e)}.wiki-popup-content::-webkit-scrollbar-thumb{background:var(--scrollbar-thumb, #3a3a5a);border-radius:4px}.wiki-popup-content::-webkit-scrollbar-thumb:hover{background:var(--scrollbar-thumb-hover, #4a4a6a)}@media (max-width: 768px){.wiki-popup{max-height:90vh;margin:10px}.wiki-popup-footer{flex-direction:column;gap:12px}.wiki-popup-actions{width:100%;justify-content:stretch}.wiki-popup-actions .btn{flex:1}}.btn{padding:10px 20px;border:none;border-radius:5px;cursor:pointer;font-size:.95em;font-weight:500;transition:all .2s}.btn-primary{background:var(--accent-blue);color:#fff}.btn-primary:hover{background:#3a7fc9}.btn-success{background:var(--accent-green);color:#fff}.btn-success:hover{background:#45a049}.btn-auto{background:linear-gradient(135deg,var(--accent-purple),var(--secondary));color:#fff;min-width:auto;padding:10px 15px}.btn-auto:hover{background:linear-gradient(135deg,#a855f7,#2563eb)}.btn-undo{background:linear-gradient(135deg,#6b7280,#4b5563);color:#fff;min-width:auto;padding:10px 15px}.btn-undo:hover{background:linear-gradient(135deg,#9ca3af,#6b7280)}.btn-warning{background:var(--accent-yellow);color:#000}.btn-danger{background:var(--accent-red);color:#fff}.btn:disabled{opacity:.5;cursor:not-allowed}.btn-header{padding:6px 12px;font-size:.85em;border:1px solid var(--border);background:var(--bg-tertiary);color:var(--text-secondary)}.btn-header:hover{background:var(--bg-primary);color:var(--text-primary);border-color:var(--primary)}.btn-header.btn-new-session{border-color:var(--primary-dark)}.btn-header.btn-new-session:hover{background:var(--primary-dark);color:#fff;border-color:var(--primary)}.btn-approve{background:var(--accent-green);color:#fff}.btn-approve:hover{background:var(--primary-light)}.btn-reject{background:transparent;border:1px solid var(--accent-red);color:var(--accent-red)}.btn-reject:hover{background:var(--accent-red);color:#fff}.form-row{display:flex;gap:15px;flex-wrap:wrap;margin-bottom:15px}.form-group{flex:1;min-width:200px}.form-group label{display:block;margin-bottom:5px;color:var(--text-secondary);font-size:.9em}.form-group input,.form-group select,.form-group textarea{width:100%;padding:10px;border:1px solid var(--border-color);border-radius:5px;background:var(--bg-primary);color:var(--text-primary);font-size:.95em}.form-group textarea{min-height:80px;resize:vertical}.spinner{display:inline-block;width:20px;height:20px;border:2px solid var(--text-secondary);border-top-color:var(--accent-blue);border-radius:50%;animation:spin 1s linear infinite}@media (max-width: 768px){.btn{padding:10px 16px;font-size:.9em}.form-row{gap:12px;margin-bottom:12px}.form-group{min-width:100%}.form-group input,.form-group select,.form-group textarea{padding:10px;font-size:16px}}@media (max-width: 480px){.btn{padding:10px 14px;font-size:.85em}.form-row{gap:10px;margin-bottom:10px}.form-group label{font-size:.85em}}.setup-panel{background:var(--bg-secondary);border-radius:10px;padding:20px;margin-bottom:20px}.setup-panel h2{color:var(--primary);margin-bottom:15px;font-size:1.2em;cursor:pointer;display:flex;justify-content:space-between;align-items:center}.setup-panel .toggle-icon{font-size:.8em;transition:transform .2s}.setup-panel.collapsed{padding:10px 20px}.setup-panel.collapsed h2{margin-bottom:0}.setup-panel.collapsed .toggle-icon{transform:rotate(-90deg)}.setup-panel.collapsed .setup-content{display:none}.env-description{margin-top:8px;padding:10px;background:var(--bg-tertiary);border-radius:5px;font-size:.85em;color:var(--text-secondary)}.advanced-section{margin-top:15px;border-top:1px solid var(--border-color);padding-top:10px}.advanced-header{display:flex;justify-content:space-between;align-items:center;cursor:pointer;padding:8px 0;color:var(--text-secondary);font-size:.9em}.advanced-header:hover{color:var(--text-primary)}.advanced-toggle-icon{transition:transform .2s}.advanced-toggle-icon.expanded{transform:rotate(90deg)}.advanced-content{padding-top:10px}.checkbox-group{display:flex;flex-direction:column;justify-content:flex-start}.checkbox-label{display:flex;align-items:center;gap:8px;cursor:pointer;font-weight:500}.checkbox-label input[type=checkbox]{width:18px;height:18px;cursor:pointer;accent-color:var(--primary)}.checkbox-text{color:var(--text-primary)}.checkbox-hint{font-size:.8em;color:var(--text-secondary);margin-top:4px;margin-left:26px}.form-hint{font-size:.8em;color:var(--text-secondary);margin-top:4px;display:block}.trajectory-mode-row{margin-bottom:15px}.trajectory-mode-toggle{display:flex;gap:0;width:100%}.trajectory-mode-toggle .mode-btn{flex:1;padding:10px 16px;border:1px solid var(--border-color);background:var(--bg-tertiary);color:var(--text-secondary);cursor:pointer;font-size:.9em;transition:all .2s}.trajectory-mode-toggle .mode-btn:first-child{border-radius:6px 0 0 6px;border-right:none}.trajectory-mode-toggle .mode-btn:last-child{border-radius:0 6px 6px 0}.trajectory-mode-toggle .mode-btn:hover{background:var(--bg-hover)}.trajectory-mode-toggle .mode-btn.active{background:var(--primary);color:#fff;border-color:var(--primary)}.btn-refresh{padding:8px 12px!important;min-width:auto!important;flex-shrink:0}.scenario-source-section{margin-bottom:15px}.scenario-source-section .section-label{display:block;font-weight:500;margin-bottom:8px;color:var(--text-primary)}.scenario-source-toggle{display:flex;gap:0;width:100%}.scenario-source-toggle .source-btn{flex:1;padding:12px 16px;border:1px solid var(--border-color);background:var(--bg-tertiary);color:var(--text-secondary);cursor:pointer;font-size:.9em;transition:all .2s}.scenario-source-toggle .source-btn:first-child{border-radius:6px 0 0 6px;border-right:none}.scenario-source-toggle .source-btn:last-child{border-radius:0 6px 6px 0}.scenario-source-toggle .source-btn:hover{background:var(--bg-hover)}.scenario-source-toggle .source-btn.active{background:var(--primary);color:#fff;border-color:var(--primary)}.scenario-options-box{background:var(--bg-tertiary);border:1px solid var(--border-color);border-radius:8px;padding:15px;margin-bottom:15px}.scenario-options-box .options-description{font-size:.85em;color:var(--text-secondary);margin-bottom:12px;padding-bottom:10px;border-bottom:1px solid var(--border-color)}.scenario-options-box .form-row,.scenario-options-box .form-group{margin-bottom:0}@media (max-width: 768px){.setup-panel{padding:16px;margin-bottom:16px}.setup-panel h2{font-size:1.1em}.env-description{font-size:.8em;padding:8px}}@media (max-width: 480px){.setup-panel{padding:12px;border-radius:8px}.setup-panel h2{font-size:1em}}.toast-container{position:fixed;bottom:20px;right:20px;z-index:1000;display:flex;flex-direction:column;gap:10px}.toast{background:var(--bg-tertiary);padding:12px 20px;border-radius:5px;animation:slideIn .3s ease;border-left:3px solid var(--accent-blue)}.toast.error{border-left-color:var(--accent-red)}.toast.success{border-left-color:var(--accent-green)}.toast.info{border-left-color:var(--accent-blue)}.trajectory-table-container{background:var(--bg-tertiary);border-radius:12px;border:1px solid var(--border);overflow:hidden}.trajectory-table{width:100%;border-collapse:collapse}.trajectory-table thead{background:var(--darker)}.trajectory-table th{text-align:left;padding:14px 16px;font-size:.75rem;text-transform:uppercase;letter-spacing:.5px;color:var(--muted);border-bottom:1px solid var(--border)}.trajectory-table tbody tr{border-bottom:1px solid var(--border);transition:background .2s ease}.trajectory-table tbody tr:last-child{border-bottom:none}.trajectory-table tbody tr:hover{background:#ffffff08}.trajectory-table td{padding:12px 16px;font-size:.9rem}.id-cell .trajectory-id{font-family:SF Mono,Fira Code,monospace;font-size:.8rem;color:var(--muted);background:var(--darker);padding:4px 8px;border-radius:4px}.env-badge{background:var(--secondary);color:#fff;padding:4px 10px;border-radius:12px;font-size:.8rem;font-weight:500}.date-cell{color:var(--muted);font-size:.85rem}.status-badge{display:inline-flex;align-items:center;gap:4px;padding:4px 10px;border-radius:12px;font-size:.8rem;font-weight:500}.status-badge.done{background:#22c55e33;color:#22c55e;font-weight:600}.status-badge.incomplete{background:#9ca3af26;color:var(--muted)}.reward-cell{text-align:center}.reward-value{font-weight:600;font-family:SF Mono,Fira Code,monospace}.reward-value.success{color:var(--primary)}.reward-value.partial{color:var(--accent-yellow)}.reward-value.fail{color:var(--accent-red)}.actions-cell{display:flex;gap:8px}.action-button{background:var(--bg-secondary);border:1px solid var(--border);border-radius:6px;color:var(--text);padding:6px 12px;cursor:pointer;font-size:.8rem;transition:all .2s ease;display:flex;align-items:center;gap:4px}.action-button:hover{background:var(--darker)}.action-button.view:hover{border-color:var(--primary);color:var(--primary)}.action-button.complete{border-color:var(--accent-green, #4ade80);color:var(--accent-green, #4ade80)}.action-button.complete:hover{background:var(--accent-green, #4ade80);color:var(--darker)}.action-button.delete:hover{border-color:var(--accent-red);color:var(--accent-red)}.action-button:disabled{opacity:.5;cursor:not-allowed}.trajectory-table-empty{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:80px 20px;background:var(--bg-tertiary);border-radius:12px;border:1px solid var(--border);text-align:center}.trajectory-table-empty .empty-icon{font-size:3rem;margin-bottom:16px}.trajectory-table-empty h3{color:var(--text);margin-bottom:8px}.trajectory-table-empty p{color:var(--muted);font-size:.9rem}@media (max-width: 1024px){.trajectory-table th,.trajectory-table td{padding:10px 12px}.trajectory-table td{font-size:.85rem}}@media (max-width: 768px){.trajectory-table-container{overflow-x:auto;-webkit-overflow-scrolling:touch}.trajectory-table{min-width:600px}.trajectory-table th,.trajectory-table td{padding:10px;font-size:.8rem}.actions-cell{flex-wrap:wrap}.action-button{padding:5px 8px;font-size:.75rem}.trajectory-table-empty{padding:40px 16px}.trajectory-table-empty .empty-icon{font-size:2rem}}@media (max-width: 480px){.trajectory-table{min-width:500px}.trajectory-table th,.trajectory-table td{padding:8px}}.trajectory-viewer-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:#000c;display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px;animation:fadeIn .2s ease}.trajectory-viewer{background:var(--bg-secondary);border-radius:16px;border:1px solid var(--border);width:100%;max-width:900px;max-height:90vh;display:flex;flex-direction:column;animation:slideUp .3s ease}@keyframes slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.viewer-header{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid var(--border)}.viewer-header h2{font-size:1.2rem;color:var(--text);margin:0}.close-button{background:var(--bg-tertiary);border:1px solid var(--border);border-radius:8px;color:var(--muted);width:36px;height:36px;cursor:pointer;font-size:1.1rem;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.close-button:hover{background:var(--accent-red);color:#fff;border-color:var(--accent-red)}.viewer-tabs{display:flex;gap:0;padding:0 24px;border-bottom:1px solid var(--border);background:var(--darker)}.viewer-tabs .tab{background:none;border:none;border-bottom:2px solid transparent;color:var(--muted);padding:12px 20px;cursor:pointer;font-size:.9rem;transition:all .2s ease}.viewer-tabs .tab:hover{color:var(--text)}.viewer-tabs .tab.active{color:var(--primary);border-bottom-color:var(--primary)}.viewer-content{flex:1;overflow-y:auto;padding:24px}.conversation-tab{display:flex;flex-direction:column;gap:16px}.conversation-stats{display:flex;align-items:center;gap:8px;color:var(--muted);font-size:.85rem;padding-bottom:12px;border-bottom:1px solid var(--border)}.conversation-stats .separator{color:var(--border)}.conversation-stats .reward{font-weight:600}.conversation-stats .reward.success{color:var(--primary)}.conversation-stats .reward.partial{color:var(--accent-yellow)}.messages-container{display:flex;flex-direction:column;gap:12px}.viewer-message{background:var(--bg-tertiary);border-radius:10px;padding:14px 16px;border-left:3px solid var(--muted)}.viewer-message.user{border-left-color:var(--secondary)}.viewer-message.agent{border-left-color:var(--primary)}.viewer-message.tool{border-left-color:var(--accent-yellow)}.viewer-message.tool-result{border-left-color:var(--accent-purple)}.viewer-message.rejected{border-left-color:var(--accent-red);background:#f4433614}.viewer-message-header{display:flex;align-items:center;gap:8px;margin-bottom:8px}.message-icon{font-size:1rem}.message-role{font-weight:600;font-size:.85rem;color:var(--text)}.tool-name-badge{background:var(--darker);color:var(--accent-yellow);padding:2px 8px;border-radius:4px;font-size:.75rem;font-family:SF Mono,Fira Code,monospace}.message-timestamp{margin-left:auto;color:var(--muted);font-size:.75rem}.expand-indicator{color:var(--muted);font-size:.7rem;margin-left:8px}.viewer-message-content{color:var(--text-secondary);font-size:.9rem;line-height:1.6;white-space:pre-wrap;word-break:break-word}.viewer-message-details{margin-top:10px;padding-top:10px;border-top:1px solid var(--border)}.details-label{font-size:.75rem;text-transform:uppercase;letter-spacing:.5px;color:var(--muted);margin-bottom:6px}.details-code{background:var(--darker);border-radius:6px;padding:10px 12px;font-size:.8rem;font-family:SF Mono,Fira Code,monospace;color:var(--text-secondary);overflow-x:auto;margin:0}.viewer-message-expanded{margin-top:12px;padding-top:12px;border-top:1px dashed var(--border);animation:fadeIn .2s ease}.reasoning-section{background:var(--darker);border-radius:8px;padding:12px;margin-bottom:12px}.reasoning-label{font-size:.75rem;text-transform:uppercase;letter-spacing:.5px;color:var(--muted);margin-bottom:8px}.reasoning-content{color:var(--text-secondary);font-size:.85rem;line-height:1.5;white-space:pre-wrap}.rejected-details{display:flex;flex-direction:column;gap:10px}.rejected-type{font-size:.85rem;color:var(--accent-red)}.rejected-content,.rejected-tool,.rejected-reasoning{padding:10px;background:var(--darker);border-radius:6px}.details-value{color:var(--text-secondary);font-size:.85rem;margin-top:4px}.metadata-tab{display:flex;flex-direction:column;gap:24px}.metadata-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px}.metadata-item{display:flex;flex-direction:column;gap:4px}.metadata-item label{font-size:.75rem;text-transform:uppercase;letter-spacing:.5px;color:var(--muted)}.metadata-item span{color:var(--text);font-size:.9rem}.metadata-item span.mono{font-family:SF Mono,Fira Code,monospace;font-size:.8rem;word-break:break-all}.metadata-item .status-done{color:var(--primary)}.metadata-item .status-incomplete{color:var(--muted)}.metadata-section{padding-top:16px;border-top:1px solid var(--border)}.metadata-section h4{color:var(--text);font-size:.9rem;margin-bottom:12px}.metadata-json{background:var(--darker);border-radius:8px;padding:14px;font-size:.8rem;font-family:SF Mono,Fira Code,monospace;color:var(--text-secondary);overflow-x:auto;margin:0}.task-tab{display:flex;flex-direction:column;gap:24px}.task-instruction-section,.persona-section,.expected-actions-section{padding-top:16px;border-top:1px solid var(--border)}.task-instruction-section h4,.persona-section h4,.expected-actions-section h4{color:var(--text);font-size:.9rem;margin-bottom:12px}.task-instruction,.persona-content{background:var(--darker);border-radius:8px;padding:14px;color:var(--text-secondary);font-size:.9rem;line-height:1.6;white-space:pre-wrap}.viewer-footer{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;border-top:1px solid var(--border);background:var(--darker);border-radius:0 0 16px 16px;gap:12px}.simulate-button{background:var(--primary);border:1px solid var(--primary);border-radius:8px;color:var(--darker);padding:10px 20px;cursor:pointer;font-size:.9rem;font-weight:500;transition:all .2s ease}.simulate-button:hover{background:var(--primary-hover, #60a5fa);border-color:var(--primary-hover, #60a5fa);transform:translateY(-1px);box-shadow:0 4px 12px #3b82f64d}.delete-button{background:transparent;border:1px solid var(--accent-red);border-radius:8px;color:var(--accent-red);padding:10px 20px;cursor:pointer;font-size:.9rem;transition:all .2s ease}.delete-button:hover{background:var(--accent-red);color:#fff}.complete-button{background:transparent;border:1px solid var(--accent-green, #4ade80);border-radius:8px;color:var(--accent-green, #4ade80);padding:10px 20px;cursor:pointer;font-size:.9rem;transition:all .2s ease}.complete-button:hover{background:var(--accent-green, #4ade80);color:var(--darker)}.close-footer-button{background:var(--bg-tertiary);border:1px solid var(--border);border-radius:8px;color:var(--text);padding:10px 24px;cursor:pointer;font-size:.9rem;transition:all .2s ease}.close-footer-button:hover{background:var(--primary);color:var(--darker);border-color:var(--primary)}.admin-page{animation:fadeIn .3s ease}.admin-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;padding-bottom:16px;border-bottom:1px solid var(--border);flex-wrap:wrap;gap:12px}.admin-header-left{display:flex;align-items:center;gap:20px}.admin-header h1{font-size:1.5rem;color:var(--text);margin:0}.back-button{background:var(--bg-tertiary);border:1px solid var(--border);border-radius:8px;color:var(--text);padding:8px 16px;cursor:pointer;font-size:.9rem;transition:all .2s ease}.back-button:hover{background:var(--primary);color:var(--darker);border-color:var(--primary)}.admin-stats{display:flex;gap:12px}.stat-badge{background:var(--bg-tertiary);border:1px solid var(--border);border-radius:20px;padding:6px 14px;font-size:.85rem;color:var(--muted)}.admin-filters{display:flex;gap:16px;align-items:flex-end;margin-bottom:20px;flex-wrap:wrap}.filter-group{display:flex;flex-direction:column;gap:6px}.filter-group label{font-size:.75rem;text-transform:uppercase;letter-spacing:.5px;color:var(--muted)}.filter-group select,.filter-group input{background:var(--bg-tertiary);border:1px solid var(--border);border-radius:6px;color:var(--text);padding:8px 12px;font-size:.9rem;min-width:180px}.filter-group select:focus,.filter-group input:focus{outline:none;border-color:var(--primary)}.refresh-button,.clear-filter-button{background:var(--bg-tertiary);border:1px solid var(--border);border-radius:6px;color:var(--text);padding:8px 16px;cursor:pointer;font-size:.9rem;transition:all .2s ease;height:38px}.refresh-button:hover{background:var(--primary);color:var(--darker);border-color:var(--primary)}.refresh-button:disabled{opacity:.5;cursor:not-allowed}.clear-filter-button{background:transparent;color:var(--muted)}.clear-filter-button:hover{color:var(--accent-red);border-color:var(--accent-red)}.admin-error{background:#f443361a;border:1px solid var(--accent-red);border-radius:8px;padding:12px 16px;margin-bottom:20px;display:flex;justify-content:space-between;align-items:center;color:var(--accent-red)}.admin-error button{background:none;border:none;color:var(--accent-red);cursor:pointer;font-size:1.1rem;padding:0 4px}.admin-loading{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;color:var(--muted);gap:16px}.admin-loading .spinner{width:40px;height:40px;border:3px solid var(--border);border-top-color:var(--primary);border-radius:50%;animation:spin 1s linear infinite}.export-group{display:flex;align-items:center;gap:8px;margin-left:auto}.export-format-select{background:var(--bg-tertiary);border:1px solid var(--border);border-radius:6px;color:var(--text);padding:8px 12px;font-size:.9rem;min-width:140px}.export-format-select:focus{outline:none;border-color:var(--primary)}.export-button{background:linear-gradient(135deg,#4caf50,#45a049);border:none;border-radius:6px;color:#fff;padding:8px 16px;cursor:pointer;font-size:.9rem;font-weight:500;transition:all .2s ease;height:38px;white-space:nowrap}.export-button:hover:not(:disabled){background:linear-gradient(135deg,#45a049,#3d9142);transform:translateY(-1px);box-shadow:0 4px 12px #4caf504d}.export-button:disabled{opacity:.5;cursor:not-allowed;transform:none}@media (max-width: 1024px){.admin-filters{gap:12px}.filter-group select,.filter-group input{min-width:150px}.export-group{margin-left:0;width:100%;justify-content:flex-start}}@media (max-width: 768px){.admin-header{flex-direction:column;align-items:flex-start}.admin-header h1{font-size:1.3rem}.admin-filters{flex-direction:column;align-items:stretch}.filter-group{width:100%}.filter-group select,.filter-group input{width:100%;min-width:auto}.refresh-button,.clear-filter-button{width:100%;justify-content:center}.export-group{flex-direction:column;gap:8px}.export-format-select{width:100%}.export-button{width:100%;justify-content:center}}@media (max-width: 480px){.admin-header h1{font-size:1.1rem}.stat-badge{font-size:.75rem;padding:4px 10px}}.tasks-editor{display:flex;flex-direction:column;height:100%}.tasks-editor.raw-mode{height:100%}.editor-toolbar{display:flex;align-items:center;gap:16px;padding:12px 16px;background:var(--bg-secondary, #16162a);border-bottom:1px solid var(--border-color, #2d2d44)}.search-box input{padding:8px 12px;background:var(--bg-tertiary, #252538);border:1px solid var(--border-color, #2d2d44);border-radius:6px;color:var(--text-primary, #fff);font-size:13px;width:250px}.search-box input:focus{outline:none;border-color:var(--accent-color, #6366f1)}.task-count{font-size:13px;color:var(--text-tertiary, #6b6b80)}.toggle-view-btn{margin-left:auto;padding:6px 12px;background:var(--bg-tertiary, #252538);border:1px solid var(--border-color, #2d2d44);border-radius:6px;color:var(--text-secondary, #a0a0b0);font-size:13px;cursor:pointer}.toggle-view-btn:hover{background:var(--bg-primary, #1a1a2e);color:var(--text-primary, #fff)}.tasks-content{display:flex;flex:1;overflow:hidden}.tasks-list{width:400px;min-width:400px;overflow-y:auto;padding:16px;display:flex;flex-direction:column;gap:12px;border-right:1px solid var(--border-color, #2d2d44)}.task-card{background:var(--bg-secondary, #16162a);border:1px solid var(--border-color, #2d2d44);border-radius:8px;padding:12px;cursor:pointer;transition:all .15s ease}.task-card:hover{border-color:var(--accent-color, #6366f1)}.task-card.selected{border-color:var(--accent-color, #6366f1);background:#6366f11a}.task-card-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.task-id{font-weight:600;font-size:14px;color:var(--accent-color, #6366f1)}.task-actions-count{font-size:11px;color:var(--text-tertiary, #6b6b80);background:var(--bg-tertiary, #252538);padding:2px 8px;border-radius:10px}.task-card-body{margin-bottom:8px}.task-known-info{font-size:12px;color:var(--text-secondary, #a0a0b0);margin:0 0 4px}.task-reason{font-size:13px;color:var(--text-primary, #fff);margin:0;line-height:1.4}.task-card-footer{display:flex;justify-content:flex-end}.edit-btn{padding:4px 10px;background:transparent;border:1px solid var(--border-color, #2d2d44);border-radius:4px;color:var(--text-secondary, #a0a0b0);font-size:12px;cursor:pointer}.edit-btn:hover{background:var(--accent-color, #6366f1);border-color:var(--accent-color, #6366f1);color:#fff}.task-detail{flex:1;padding:20px;overflow-y:auto}.task-detail h3{margin:0 0 20px;font-size:18px;color:var(--text-primary, #fff)}.detail-section{margin-bottom:24px}.detail-section h4{margin:0 0 12px;font-size:14px;color:var(--text-tertiary, #6b6b80);text-transform:uppercase;letter-spacing:.5px}.detail-field{margin-bottom:16px}.detail-field label{display:block;font-size:12px;color:var(--text-tertiary, #6b6b80);margin-bottom:4px}.detail-field p{margin:0;font-size:14px;color:var(--text-primary, #fff);line-height:1.5;background:var(--bg-secondary, #16162a);padding:10px 12px;border-radius:6px}.actions-list{display:flex;flex-direction:column;gap:12px}.action-detail{display:flex;gap:12px;background:var(--bg-secondary, #16162a);padding:12px;border-radius:6px}.action-index{width:24px;height:24px;background:var(--accent-color, #6366f1);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:600;color:#fff;flex-shrink:0}.action-content{flex:1;min-width:0}.action-name{display:block;font-weight:500;color:var(--text-primary, #fff);margin-bottom:4px}.action-args{display:block;font-size:12px;color:var(--text-secondary, #a0a0b0);background:var(--bg-tertiary, #252538);padding:8px;border-radius:4px;overflow-x:auto;white-space:pre-wrap;word-break:break-word;margin:0}.edit-task-btn{padding:10px 20px;background:var(--accent-color, #6366f1);border:none;border-radius:6px;color:#fff;font-size:14px;font-weight:500;cursor:pointer}.edit-task-btn:hover{background:#5558e8}.modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:#000000b3;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content{background:var(--bg-primary, #1a1a2e);border-radius:12px;width:90%;max-width:700px;max-height:90vh;display:flex;flex-direction:column}.modal-header{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid var(--border-color, #2d2d44)}.modal-header h2{margin:0;font-size:18px}.close-btn{background:none;border:none;color:var(--text-secondary, #a0a0b0);font-size:24px;cursor:pointer;padding:0;line-height:1}.close-btn:hover{color:var(--text-primary, #fff)}.modal-body{flex:1;overflow-y:auto;padding:20px}.form-section{margin-bottom:24px}.form-section h3{margin:0 0 16px;font-size:14px;color:var(--text-tertiary, #6b6b80);text-transform:uppercase;letter-spacing:.5px}.form-group{margin-bottom:16px}.form-group label{display:block;font-size:13px;font-weight:500;color:var(--text-primary, #fff);margin-bottom:6px}.form-group textarea,.form-group input{width:100%;padding:10px 12px;background:var(--bg-secondary, #16162a);border:1px solid var(--border-color, #2d2d44);border-radius:6px;color:var(--text-primary, #fff);font-size:14px;font-family:inherit;resize:vertical}.form-group textarea:focus,.form-group input:focus{outline:none;border-color:var(--accent-color, #6366f1)}.field-hint{display:block;font-size:11px;color:var(--text-tertiary, #6b6b80);margin-top:4px}.actions-preview{display:flex;flex-direction:column;gap:8px;max-height:200px;overflow-y:auto}.action-item{display:flex;align-items:flex-start;gap:8px;padding:8px;background:var(--bg-secondary, #16162a);border-radius:4px}.action-item .action-name{font-weight:500;white-space:nowrap}.action-item .action-args{font-size:11px;color:var(--text-tertiary, #6b6b80);flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.section-note{font-size:12px;color:var(--text-tertiary, #6b6b80);font-style:italic;margin-top:8px}.modal-footer{display:flex;justify-content:flex-end;gap:12px;padding:16px 20px;border-top:1px solid var(--border-color, #2d2d44)}.cancel-btn{padding:8px 16px;background:transparent;border:1px solid var(--border-color, #2d2d44);border-radius:6px;color:var(--text-secondary, #a0a0b0);font-size:14px;cursor:pointer}.cancel-btn:hover{background:var(--bg-secondary, #16162a);color:var(--text-primary, #fff)}.save-btn{padding:8px 16px;background:var(--accent-color, #6366f1);border:none;border-radius:6px;color:#fff;font-size:14px;font-weight:500;cursor:pointer}.save-btn:hover{background:#5558e8}.raw-json-editor{flex:1;width:100%;padding:16px;background:var(--bg-primary, #1a1a2e);border:none;color:var(--text-primary, #fff);font-family:Fira Code,monospace;font-size:13px;line-height:1.5;resize:none}.raw-json-editor:focus{outline:none}@media (max-width: 900px){.tasks-content{flex-direction:column}.tasks-list{width:100%;min-width:100%;max-height:40vh;border-right:none;border-bottom:1px solid var(--border-color, #2d2d44)}}.database-editor{display:flex;flex-direction:column;height:100%}.database-editor.raw-mode{height:100%}.database-editor .editor-toolbar{display:flex;align-items:center;justify-content:space-between;padding:0;background:var(--bg-secondary, #16162a);border-bottom:1px solid var(--border-color, #2d2d44)}.tabs{display:flex}.tab{display:flex;align-items:center;gap:8px;padding:14px 20px;background:transparent;border:none;border-bottom:2px solid transparent;color:var(--text-secondary, #a0a0b0);font-size:14px;cursor:pointer;transition:all .15s ease}.tab:hover{background:var(--bg-tertiary, #252538);color:var(--text-primary, #fff)}.tab.active{color:var(--accent-color, #6366f1);border-bottom-color:var(--accent-color, #6366f1)}.tab-icon{font-size:16px}.tab-count{background:var(--bg-tertiary, #252538);padding:2px 8px;border-radius:10px;font-size:12px}.tab.active .tab-count{background:var(--accent-color, #6366f1);color:#fff}.toolbar-right{display:flex;align-items:center;gap:12px;padding-right:16px}.database-editor .search-box input{padding:8px 12px;background:var(--bg-tertiary, #252538);border:1px solid var(--border-color, #2d2d44);border-radius:6px;color:var(--text-primary, #fff);font-size:13px;width:200px}.database-editor .search-box input:focus{outline:none;border-color:var(--accent-color, #6366f1)}.database-content{display:flex;flex:1;overflow:hidden}.table-area{flex:1;overflow:hidden;display:flex;flex-direction:column}.table-area.with-detail{flex:0 0 55%}.data-table-container{display:flex;flex-direction:column;height:100%}.table-scroll{flex:1;overflow:auto}.data-table{width:100%;border-collapse:collapse;font-size:13px}.data-table th{position:sticky;top:0;background:var(--bg-secondary, #16162a);padding:12px 16px;text-align:left;font-weight:600;color:var(--text-tertiary, #6b6b80);text-transform:uppercase;font-size:11px;letter-spacing:.5px;border-bottom:1px solid var(--border-color, #2d2d44);cursor:pointer;white-space:nowrap}.data-table th:hover{color:var(--text-primary, #fff)}.sort-indicator{color:var(--accent-color, #6366f1)}.data-table td{padding:12px 16px;border-bottom:1px solid var(--border-color, #2d2d44);color:var(--text-primary, #fff)}.data-table tbody tr{cursor:pointer;transition:background .1s ease}.data-table tbody tr:hover{background:var(--bg-tertiary, #252538)}.data-table tbody tr.selected{background:#6366f126}.status-badge{display:inline-block;padding:3px 10px;border-radius:12px;font-size:12px;font-weight:500}.status-badge.pending{background:#fbbf2433;color:#fbbf24}.status-badge.processed{background:#3b82f633;color:#3b82f6}.status-badge.delivered{background:#22c55e33;color:#22c55e}.status-badge.cancelled{background:#ef444433;color:#ef4444}.table-pagination{display:flex;align-items:center;justify-content:center;gap:16px;padding:12px;background:var(--bg-secondary, #16162a);border-top:1px solid var(--border-color, #2d2d44)}.table-pagination button{padding:6px 12px;background:var(--bg-tertiary, #252538);border:1px solid var(--border-color, #2d2d44);border-radius:4px;color:var(--text-secondary, #a0a0b0);font-size:13px;cursor:pointer}.table-pagination button:disabled{opacity:.5;cursor:not-allowed}.table-pagination button:not(:disabled):hover{background:var(--accent-color, #6366f1);border-color:var(--accent-color, #6366f1);color:#fff}.table-pagination span{color:var(--text-secondary, #a0a0b0);font-size:13px}.record-detail-panel{width:45%;border-left:1px solid var(--border-color, #2d2d44);display:flex;flex-direction:column;background:var(--bg-primary, #1a1a2e)}.panel-header{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid var(--border-color, #2d2d44)}.panel-header h3{margin:0;font-size:16px;color:var(--text-primary, #fff)}.panel-body{flex:1;overflow-y:auto;padding:20px}.panel-footer{display:flex;justify-content:flex-end;gap:12px;padding:16px 20px;border-top:1px solid var(--border-color, #2d2d44)}.form-row{display:flex;gap:16px;margin-bottom:16px}.form-group{flex:1}.form-group.flex-2{flex:2}.form-group label{display:block;font-size:12px;color:var(--text-tertiary, #6b6b80);margin-bottom:4px}.form-group input,.form-group select{width:100%;padding:8px 10px;background:var(--bg-secondary, #16162a);border:1px solid var(--border-color, #2d2d44);border-radius:4px;color:var(--text-primary, #fff);font-size:13px}.form-group input:disabled{background:var(--bg-tertiary, #252538);color:var(--text-secondary, #a0a0b0)}.form-group input:focus,.form-group select:focus{outline:none;border-color:var(--accent-color, #6366f1)}.form-section-title{font-size:12px;font-weight:600;color:var(--text-tertiary, #6b6b80);text-transform:uppercase;letter-spacing:.5px;margin:20px 0 12px;padding-top:16px;border-top:1px solid var(--border-color, #2d2d44)}.nested-data{display:flex;flex-direction:column;gap:8px}.nested-item{display:flex;align-items:center;gap:8px;padding:8px 12px;background:var(--bg-secondary, #16162a);border-radius:4px}.nested-label{font-weight:500;color:var(--text-primary, #fff);min-width:80px}.nested-value{color:var(--text-secondary, #a0a0b0);font-size:13px;flex:1}.nested-badge{background:var(--accent-color, #6366f1);color:#fff;padding:2px 8px;border-radius:10px;font-size:12px}.variants-list{display:flex;flex-direction:column;gap:12px}.variant-item{background:var(--bg-secondary, #16162a);border-radius:6px;padding:12px}.variant-header{display:flex;align-items:center;gap:12px;margin-bottom:8px}.variant-id{font-family:Fira Code,monospace;font-size:12px;color:var(--text-secondary, #a0a0b0)}.variant-price{font-weight:600;color:var(--text-primary, #fff)}.variant-stock{font-size:11px;padding:2px 8px;border-radius:10px}.variant-stock.in-stock{background:#22c55e33;color:#22c55e}.variant-stock.out-stock{background:#ef444433;color:#ef4444}.variant-options{display:flex;flex-wrap:wrap;gap:6px}.option-tag{background:var(--bg-tertiary, #252538);padding:2px 8px;border-radius:4px;font-size:11px;color:var(--text-secondary, #a0a0b0)}.more-items{font-size:12px;color:var(--text-tertiary, #6b6b80);font-style:italic;text-align:center}.items-list,.payment-history{display:flex;flex-direction:column;gap:8px}.order-item,.payment-item{display:flex;align-items:center;gap:12px;padding:10px 12px;background:var(--bg-secondary, #16162a);border-radius:4px}.item-name{font-weight:500;color:var(--text-primary, #fff);flex:1}.item-price{font-weight:600;color:var(--accent-color, #6366f1)}.item-options{display:flex;flex-wrap:wrap;gap:4px}.payment-type{background:var(--bg-tertiary, #252538);padding:2px 8px;border-radius:4px;font-size:12px;text-transform:capitalize}.payment-amount{font-weight:600;color:var(--text-primary, #fff)}.payment-method{font-size:12px;color:var(--text-secondary, #a0a0b0);flex:1;text-align:right}.database-editor .close-btn{background:none;border:none;color:var(--text-secondary, #a0a0b0);font-size:24px;cursor:pointer;padding:0;line-height:1}.database-editor .close-btn:hover{color:var(--text-primary, #fff)}.database-editor .cancel-btn{padding:8px 16px;background:transparent;border:1px solid var(--border-color, #2d2d44);border-radius:6px;color:var(--text-secondary, #a0a0b0);font-size:13px;cursor:pointer}.database-editor .cancel-btn:hover{background:var(--bg-secondary, #16162a);color:var(--text-primary, #fff)}.database-editor .save-btn{padding:8px 16px;background:var(--accent-color, #6366f1);border:none;border-radius:6px;color:#fff;font-size:13px;font-weight:500;cursor:pointer}.database-editor .save-btn:hover{background:#5558e8}.database-editor .toggle-view-btn{padding:6px 12px;background:var(--bg-tertiary, #252538);border:1px solid var(--border-color, #2d2d44);border-radius:6px;color:var(--text-secondary, #a0a0b0);font-size:13px;cursor:pointer}.database-editor .toggle-view-btn:hover{background:var(--bg-primary, #1a1a2e);color:var(--text-primary, #fff)}.database-editor .raw-json-editor{flex:1;width:100%;padding:16px;background:var(--bg-primary, #1a1a2e);border:none;color:var(--text-primary, #fff);font-family:Fira Code,monospace;font-size:13px;line-height:1.5;resize:none}.database-editor .raw-json-editor:focus{outline:none}@media (max-width: 1200px){.table-area.with-detail{flex:0 0 50%}.record-detail-panel{width:50%}}@media (max-width: 900px){.database-content{flex-direction:column}.table-area.with-detail{flex:none;max-height:50vh}.record-detail-panel{width:100%;border-left:none;border-top:1px solid var(--border-color, #2d2d44)}}.environments-page{display:flex;flex-direction:column;height:100%;background:var(--bg-primary, #1a1a2e);color:var(--text-primary, #ffffff)}.page-header{padding:24px 32px;border-bottom:1px solid var(--border-color, #2d2d44);background:var(--bg-secondary, #16162a)}.page-header h1{margin:0 0 8px;font-size:24px;font-weight:600}.page-header p{margin:0;color:var(--text-secondary, #a0a0b0);font-size:14px}.error-banner{display:flex;align-items:center;justify-content:space-between;padding:12px 24px;background:#ff444426;border-bottom:1px solid #ff4444;color:#ff6b6b}.error-banner button{background:none;border:none;color:#ff6b6b;font-size:20px;cursor:pointer;padding:0 8px}.success-banner{padding:12px 24px;background:#22c55e26;border-bottom:1px solid #22c55e;color:#22c55e;text-align:center}.environments-content{display:flex;flex:1;overflow:hidden}.sidebar{width:280px;min-width:280px;border-right:1px solid var(--border-color, #2d2d44);background:var(--bg-secondary, #16162a);display:flex;flex-direction:column;overflow-y:auto}.env-selector{padding:16px;border-bottom:1px solid var(--border-color, #2d2d44)}.env-selector label{display:block;font-size:11px;font-weight:600;text-transform:uppercase;color:var(--text-tertiary, #6b6b80);margin-bottom:8px;letter-spacing:.5px}.env-selector select{width:100%;padding:10px 12px;background:var(--bg-tertiary, #252538);border:1px solid var(--border-color, #2d2d44);border-radius:6px;color:var(--text-primary, #ffffff);font-size:14px;cursor:pointer}.env-selector select:focus{outline:none;border-color:var(--accent-color, #6366f1)}.files-list{padding:16px;flex:1}.files-list h3{font-size:11px;font-weight:600;text-transform:uppercase;color:var(--text-tertiary, #6b6b80);margin:0 0 12px;letter-spacing:.5px}.files-list ul{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:4px}.file-item{display:flex;align-items:center;gap:12px;padding:10px 12px;background:transparent;border:1px solid transparent;border-radius:6px;cursor:pointer;transition:all .15s ease}.file-item:hover{background:var(--bg-tertiary, #252538)}.file-item.selected{background:var(--accent-color, #6366f1);border-color:var(--accent-color, #6366f1)}.file-item.readonly{opacity:.7}.file-icon{font-size:18px}.file-info{display:flex;flex-direction:column;flex:1;min-width:0}.file-name{font-size:13px;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.file-size{font-size:11px;color:var(--text-tertiary, #6b6b80)}.file-item.selected .file-size{color:#ffffffb3}.readonly-badge{font-size:10px;padding:2px 6px;background:var(--bg-tertiary, #252538);border-radius:4px;color:var(--text-tertiary, #6b6b80)}.file-item.selected .readonly-badge{background:#fff3;color:#fffc}.editor-panel{flex:1;display:flex;flex-direction:column;overflow:hidden}.editor-header{display:flex;align-items:center;justify-content:space-between;padding:12px 20px;background:var(--bg-secondary, #16162a);border-bottom:1px solid var(--border-color, #2d2d44);flex-wrap:wrap;gap:8px}.editor-header h2{display:flex;align-items:center;gap:8px;font-size:14px;font-weight:500;margin:0}.unsaved-indicator{color:#fbbf24;font-size:20px;font-weight:700}.file-description{font-size:12px;color:var(--text-secondary, #a0a0b0)}.editor-content{flex:1;overflow:hidden;display:flex;flex-direction:column}.text-editor{display:flex;flex-direction:column;height:100%}.text-editor textarea{flex:1;width:100%;padding:20px;background:var(--bg-primary, #1a1a2e);border:none;color:var(--text-primary, #ffffff);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;font-size:14px;line-height:1.6;resize:none;overflow:auto;white-space:pre-wrap;word-wrap:break-word}.text-editor textarea:focus{outline:none}.editor-actions{display:flex;gap:8px;padding:12px 20px;background:var(--bg-secondary, #16162a);border-top:1px solid var(--border-color, #2d2d44)}.save-btn{padding:8px 20px;background:var(--accent-color, #6366f1);border:none;border-radius:6px;color:#fff;font-size:13px;font-weight:500;cursor:pointer;transition:all .15s ease}.save-btn:hover:not(:disabled){background:#5558e8}.save-btn:disabled{opacity:.6;cursor:not-allowed}.reset-btn{padding:8px 20px;background:transparent;border:1px solid var(--border-color, #2d2d44);border-radius:6px;color:var(--text-secondary, #a0a0b0);font-size:13px;font-weight:500;cursor:pointer;transition:all .15s ease}.reset-btn:hover:not(:disabled){background:#ff44441a;border-color:#f44;color:#f44}.reset-btn:disabled{opacity:.5;cursor:not-allowed}.loading{display:flex;align-items:center;justify-content:center;padding:40px;color:var(--text-secondary, #a0a0b0)}.no-file-selected{display:flex;align-items:center;justify-content:center;flex:1;background:var(--bg-primary, #1a1a2e)}.no-file-selected p{color:var(--text-tertiary, #6b6b80);font-size:14px}@media (max-width: 768px){.environments-content{flex-direction:column}.sidebar{width:100%;min-width:100%;border-right:none;border-bottom:1px solid var(--border-color, #2d2d44);max-height:40vh}.page-header{padding:16px 20px}.page-header h1{font-size:20px}}.chat-header{padding:15px 20px;border-bottom:1px solid var(--border-color);display:flex;justify-content:space-between;align-items:center}.chat-header h3{color:var(--primary)}.chat-header-right{display:flex;align-items:center;gap:10px}.status-badge{padding:5px 10px;border-radius:15px;font-size:.8em;font-weight:500}.status-badge.active{background:var(--accent-green);color:#fff}.status-badge.inactive{background:var(--text-secondary);color:#fff}.status-badge.done{background:#22c55e33;color:#22c55e}.btn-save-trajectory{background:var(--accent-green);color:#fff}.btn-save-trajectory:hover:not(:disabled){background:#45a049}.btn-save-trajectory:disabled{background:var(--text-secondary);cursor:not-allowed;opacity:.6}.autopilot-toggle{display:flex;align-items:center;gap:8px;padding:4px 12px;background:var(--bg-secondary);border-radius:20px;border:1px solid var(--border-color)}.autopilot-label{font-size:.85em;font-weight:500;color:var(--text-primary)}.toggle-switch{position:relative;display:inline-block;width:44px;height:24px}.toggle-switch input{opacity:0;width:0;height:0}.toggle-slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:var(--text-secondary);transition:.3s;border-radius:24px}.toggle-slider:before{position:absolute;content:"";height:18px;width:18px;left:3px;bottom:3px;background-color:#fff;transition:.3s;border-radius:50%}.toggle-switch input:checked+.toggle-slider{background-color:var(--accent-green)}.toggle-switch input:checked+.toggle-slider:before{transform:translate(20px)}.toggle-switch input:focus+.toggle-slider{box-shadow:0 0 1px var(--accent-green)}.auto-save-status{display:flex;align-items:center;gap:6px;padding:5px 12px;border-radius:15px;font-size:.8em;font-weight:500;cursor:default}.auto-save-status.saving{background:var(--bg-secondary);color:var(--text-secondary);animation:pulse 1.5s infinite}.auto-save-status.saved{background:#4caf5026;color:var(--accent-green)}.auto-save-status.unsaved{background:var(--bg-secondary);color:var(--text-secondary)}@keyframes pulse{0%,to{opacity:1}50%{opacity:.5}}.chat-header-left{display:flex;align-items:center;gap:10px}.chat-header-left h3{margin:0}@media (max-width: 768px){.chat-header{padding:10px 14px;gap:8px}.chat-header h3{font-size:.95rem}.chat-header-right{gap:6px}.autopilot-toggle{padding:4px 8px;gap:4px}.autopilot-label-text{display:none}.toggle-switch{width:36px;height:20px}.toggle-slider:before{height:14px;width:14px}.toggle-switch input:checked+.toggle-slider:before{transform:translate(16px)}.auto-save-status{padding:4px 8px;font-size:.7em}.auto-save-status .save-text{display:none}.status-badge{padding:3px 8px;font-size:.7em}.btn-new-trajectory .btn-text{display:none}.btn-new-trajectory{padding:6px 10px!important;min-width:auto}}@media (max-width: 1000px){.chat-header-right .autopilot-toggle,.chat-header-right .auto-save-status,.chat-header-right .btn-new-trajectory,.chat-header-left .status-badge,.chat-header{display:none}}@media (max-width: 480px){.chat-header{padding:8px 12px}.chat-header-left{gap:6px}.chat-header h3{font-size:.85rem}.header-title-text{display:none}.status-badge{padding:2px 6px;font-size:.65em}}.sticky-user-message{background:var(--darker);border-bottom:1px solid var(--border);padding:10px 20px;display:none}.sticky-user-message.visible{display:flex;align-items:flex-start;gap:8px}.sticky-user-message .sticky-label{font-size:.8em;color:var(--muted);white-space:nowrap;flex-shrink:0}.sticky-user-message .sticky-content{color:var(--accent-blue);font-size:.9em;line-height:1.4;max-height:60px;overflow-y:auto;flex:1}@media (max-width: 768px){.sticky-user-message{padding:6px 14px}.sticky-user-message .sticky-label{font-size:.7em}.sticky-user-message .sticky-content{font-size:.8em;max-height:36px}}@media (max-width: 1000px){.sticky-user-message{display:none!important}}.tool-result-container{width:100%}.tool-result-formatted{background:var(--bg-tertiary);border-radius:8px;overflow:hidden}.tool-result-item{display:flex;padding:8px 12px;border-bottom:1px solid var(--border)}.tool-result-item:last-child{border-bottom:none}.tool-result-key{color:var(--accent-blue);font-weight:500;min-width:120px;flex-shrink:0;font-size:.85em}.tool-result-value{color:var(--text-secondary);word-break:break-word;font-size:.9em;white-space:pre-wrap}.tool-result-value.success{color:var(--accent-green)}.tool-result-value.error{color:var(--accent-red)}.tool-result-raw{font-family:Consolas,Monaco,monospace;font-size:.85em;padding:12px;white-space:pre-wrap;background:var(--bg-tertiary);border-radius:8px}.tool-result-toggle{font-size:.8em;color:var(--muted);cursor:pointer;padding:8px 12px;background:var(--bg-primary);border-radius:0 0 8px 8px}.tool-result-toggle:hover{color:var(--text-primary)}.message{margin-bottom:15px;animation:fadeIn .3s ease}.message.temporary{opacity:.7}.message-header{display:flex;align-items:center;gap:8px;margin-bottom:5px}.message-icon{font-size:1.2em}.message-role{font-weight:600;font-size:.9em}.message-actions{margin-left:auto;display:flex;align-items:center;gap:4px;opacity:0;transition:opacity .2s ease}.message:hover .message-actions{opacity:1}.message-action-btn{background:var(--bg-tertiary);border:1px solid var(--border);border-radius:50%;width:24px;height:24px;font-size:.75em;color:var(--muted);cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;padding:0}.message-action-btn:hover{background:var(--darker);border-color:var(--primary)}.message-action-btn.rollback-btn:hover{color:var(--error);border-color:var(--error)}.message-action-btn.refresh-btn:hover{color:var(--accent-blue);border-color:var(--accent-blue)}.reasoning-toggle{background:var(--bg-tertiary);border:1px solid var(--border);border-radius:12px;padding:4px 10px;font-size:.75em;color:var(--muted);cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:4px}.reasoning-toggle:hover{background:var(--darker);color:var(--primary);border-color:var(--primary)}.reasoning-toggle.active{background:var(--primary-dark);color:var(--primary);border-color:var(--primary)}.message-reasoning{background:var(--darker);border-left:3px solid var(--muted);border-radius:0 8px 8px 0;padding:10px 12px;margin-bottom:8px;animation:slideDown .2s ease}.reasoning-label{font-size:.75em;font-weight:600;text-transform:uppercase;letter-spacing:.5px;color:var(--muted);margin-bottom:6px}.reasoning-content{font-size:.85em;color:var(--text-secondary);line-height:1.5;white-space:pre-wrap;max-height:150px;overflow-y:auto}@keyframes slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.message.user .message-role{color:var(--accent-yellow)}.message.agent .message-role{color:var(--accent-green)}.message.tool .message-role{color:var(--accent-purple)}.message.tool-result .message-role{color:var(--accent-blue)}.message.reasoning .message-role{color:var(--muted)}.message-content{background:var(--bg-tertiary);padding:12px 15px;border-radius:10px;line-height:1.5;white-space:pre-wrap}.message.user .message-content{border-left:3px solid var(--accent-yellow)}.message.agent .message-content{border-left:3px solid var(--accent-green)}.message.tool .message-content{font-family:Consolas,Monaco,monospace;font-size:.9em;border-left:3px solid var(--accent-purple)}.message.tool-result .message-content{border-left:3px solid var(--accent-blue);padding:0;background:transparent}.message.reasoning .message-content{font-size:.9em;color:var(--text-secondary);background:var(--darker);border-left:3px solid var(--primary);opacity:.9}@media (max-width: 768px){.message{margin-bottom:10px}.message-content{padding:10px 12px;font-size:.88em;border-radius:8px;border-left-width:2px}.message-header{gap:6px;margin-bottom:4px}.message-icon{font-size:.95em}.message-role{font-size:.8em}.message-actions{opacity:1}.message-action-btn{width:22px;height:22px;font-size:.7em}.reasoning-toggle{padding:3px 8px;font-size:.68em}.message-reasoning{padding:8px 10px;margin-bottom:6px}.reasoning-label{font-size:.68em;margin-bottom:4px}.reasoning-content{font-size:.78em;max-height:100px}}@media (max-width: 480px){.message{margin-bottom:8px}.message-header{margin-bottom:3px}.message-icon{font-size:.9em}.message-role{font-size:.75em}.message-content{padding:8px 10px;font-size:.82em;line-height:1.45}.message.tool .message-content{font-size:.75em;overflow-x:auto;max-height:120px;overflow-y:auto}.message-action-btn{width:20px;height:20px}.reasoning-toggle{padding:2px 6px;font-size:.65em;border-radius:10px}.message-reasoning{padding:6px 8px;border-left-width:2px}.reasoning-content{font-size:.72em;max-height:80px}}.message-list{display:flex;flex-direction:column}.conversation-ended{display:flex;flex-direction:column;align-items:center;gap:16px;padding:24px;margin:20px 0;background:linear-gradient(135deg,#f0f9f4,#e8f5e9);border:1px solid #c8e6c9;border-radius:12px;text-align:center}.conversation-ended-message{display:flex;align-items:center;gap:10px;font-size:16px;color:#2e7d32;font-weight:500}.ended-icon{font-size:24px}.ended-text{font-size:16px}.btn-new-trajectory{display:inline-flex;align-items:center;gap:8px;padding:12px 24px;font-size:14px;font-weight:600;color:#fff;background:linear-gradient(135deg,#667eea,#764ba2);border:none;border-radius:8px;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 8px #667eea4d}.btn-new-trajectory:hover{transform:translateY(-1px);box-shadow:0 4px 12px #667eea66}.btn-new-trajectory:active{transform:translateY(0)}.chat-input{padding:15px 20px;border-top:1px solid var(--border-color)}.input-container{display:flex;gap:10px}.input-container input{flex:1;padding:12px 15px;border:1px solid var(--border-color);border-radius:5px;background:var(--bg-primary);color:var(--text-primary);font-size:.95em}.input-container input:focus{outline:none;border-color:var(--accent-blue)}.input-container input:disabled{opacity:.5;cursor:not-allowed}@media (max-width: 768px){.chat-input{padding:10px 14px}.input-container{gap:8px}.input-container input{flex:1;padding:10px 12px;font-size:16px;border-radius:8px}.input-container .btn{min-width:0;padding:10px 14px;font-size:.85em;white-space:nowrap}}@media (max-width: 480px){.chat-input{padding:8px 10px;padding-bottom:calc(8px + env(safe-area-inset-bottom,0px));background:var(--bg-secondary);border-top:1px solid var(--border);flex-shrink:0}.input-container{gap:6px}.input-container input{flex:1;min-width:0;padding:10px;font-size:16px}.input-container input::placeholder{font-size:.8em}.input-container .btn{padding:10px 14px;font-size:.85em;border-radius:8px}}.action-suggestion{background:var(--bg-tertiary);border:2px solid var(--primary);border-radius:12px;margin-bottom:15px;animation:fadeIn .3s ease;overflow:hidden}.action-suggestion-header{background:linear-gradient(135deg,var(--primary-dark),var(--primary));padding:12px 16px;display:flex;align-items:center;gap:10px}.action-suggestion-header h4{color:#fff;margin:0;font-size:.95em;font-weight:600}.action-suggestion-body{padding:16px}.action-suggestion-section{margin-bottom:12px}.action-suggestion-section:last-of-type{margin-bottom:0}.action-suggestion-label{font-size:.8em;font-weight:600;text-transform:uppercase;letter-spacing:.5px;margin-bottom:6px;display:flex;align-items:center;gap:6px}.action-suggestion-label.reasoning{color:var(--muted)}.action-suggestion-label.response{color:var(--accent-green)}.action-suggestion-label.tool{color:var(--accent-purple)}.action-suggestion-content{background:var(--bg-primary);padding:12px;border-radius:8px;font-size:.9em;line-height:1.5;white-space:pre-wrap;max-height:200px;overflow-y:auto}.action-suggestion-content.reasoning{color:var(--text-secondary);border-left:3px solid var(--muted);font-size:.85em;max-height:120px}.action-suggestion-content.code{font-family:Consolas,Monaco,monospace;font-size:.85em}.action-suggestion-buttons{display:flex;gap:10px;padding:12px 16px;background:var(--darker);border-top:1px solid var(--border)}.action-suggestion-buttons .btn{flex:1;padding:12px 20px;font-size:.95em}.action-suggestion.pending{opacity:1}.action-suggestion.approved{border-color:var(--accent-green);opacity:.7}.action-suggestion.rejected{border-color:var(--accent-red);opacity:.5}@media (max-width: 768px){.action-suggestion{margin-bottom:10px;border-radius:10px;border-width:1px}.action-suggestion-header{padding:8px 12px;gap:6px}.action-suggestion-header h4{font-size:.85em}.action-suggestion-body{padding:10px}.action-suggestion-section{margin-bottom:8px}.action-suggestion-label{font-size:.7em}.action-suggestion-content{padding:8px;font-size:.8em;max-height:120px}.action-suggestion-content.reasoning{font-size:.75em;max-height:60px;border-left-width:2px}.action-suggestion-buttons{padding:8px 12px;gap:8px}.action-suggestion-buttons .btn{padding:10px 14px;font-size:.85em}}@media (max-width: 480px){.action-suggestion{margin-bottom:8px;border-radius:8px;margin-left:-2px;margin-right:-2px}.action-suggestion-header{padding:6px 10px}.action-suggestion-header h4{font-size:.8em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.action-suggestion-body{padding:8px}.action-suggestion-section{margin-bottom:6px}.action-suggestion-label{font-size:.65em;margin-bottom:4px}.action-suggestion-content.reasoning{max-height:100px;padding:8px 10px;font-size:.75em;overflow-y:auto;display:block;-webkit-line-clamp:unset;-webkit-box-orient:unset}.action-suggestion-content{padding:6px 8px;font-size:.75em;max-height:100px}.action-suggestion-content.code{font-size:.7em;max-height:80px}.action-suggestion-buttons{padding:6px 10px;gap:6px}.action-suggestion-buttons .btn{padding:8px 12px;font-size:.8em;flex:1;min-width:0}.action-suggestion-buttons .btn-reject{flex:.8}.action-suggestion-buttons .btn-approve{flex:1.2}}.loading-message{display:flex;align-items:center;gap:10px;padding:15px 20px;background:var(--bg-tertiary);border-radius:10px;border-left:3px solid var(--primary);margin-bottom:15px;animation:fadeIn .3s ease}.loading-message .loading-spinner{width:24px;height:24px;border:3px solid var(--border);border-top-color:var(--primary);border-radius:50%;animation:spin .8s linear infinite}.loading-message .loading-text{color:var(--text-secondary);font-size:.95em}.loading-message .loading-dots:after{content:"";animation:dots 1.5s steps(4,end) infinite}@media (max-width: 768px){.loading-message{padding:12px 16px;gap:8px;border-radius:8px;margin-bottom:12px}.loading-message .loading-spinner{width:20px;height:20px;border-width:2px}.loading-message .loading-text{font-size:.9em}}@media (max-width: 480px){.loading-message{padding:10px 12px;margin-bottom:10px}.loading-message .loading-text{font-size:.85em}}.prompt-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:#000000b3;display:flex;align-items:center;justify-content:center;z-index:1000;animation:fadeIn .2s ease}.prompt-dialog{background:var(--bg-secondary);padding:25px;border-radius:10px;max-width:450px;width:90%;border:1px solid var(--border-color);animation:fadeIn .2s ease}.prompt-dialog h3{color:var(--primary);margin-bottom:15px}.prompt-dialog p{color:var(--text-secondary);margin-bottom:15px;line-height:1.5;font-size:.95em}.prompt-input{width:100%;padding:12px;border:1px solid var(--border-color);border-radius:8px;background:var(--bg-tertiary);color:var(--text-primary);font-size:.95em;margin-bottom:20px;box-sizing:border-box}.prompt-input:focus{outline:none;border-color:var(--primary)}.prompt-input::placeholder{color:var(--text-secondary);opacity:.7}.prompt-dialog-buttons{display:flex;gap:10px;justify-content:flex-end}.chat-panel{background:var(--bg-secondary);border-radius:10px;display:flex;flex-direction:column;height:calc(100vh - 100px);min-height:600px}.chat-messages{flex:1;overflow-y:auto;padding:20px}@media (max-width: 768px){.chat-panel{height:calc(100vh - 140px);height:calc(100dvh - 140px);min-height:400px;border-radius:8px}.chat-messages{padding:10px}}@media (max-width: 480px){.chat-panel{height:calc(100vh - 60px);height:calc(100dvh - 60px);min-height:unset;border-radius:0;margin:0 -8px;width:calc(100% + 16px);border:none}.chat-messages{padding:8px 8px 12px}}.panel-card{background:var(--bg-secondary);border-radius:10px;overflow:hidden}.panel-card-header{padding:12px 15px;background:var(--bg-tertiary);font-weight:600;display:flex;justify-content:space-between;align-items:center;cursor:pointer}.panel-card-header:hover{background:var(--border-color)}.panel-toggle{transition:transform .2s}.panel-toggle.expanded{transform:rotate(0)}.panel-toggle:not(.expanded){transform:rotate(-90deg)}.panel-card-content{padding:15px;max-height:300px;overflow-y:auto}.tool-form{padding:15px;background:var(--bg-tertiary);border-radius:5px;margin-top:10px}.tool-form h4{color:var(--accent-green);margin-bottom:10px}.tool-param{margin-bottom:10px}.tool-param label{display:block;font-size:.85em;color:var(--text-secondary);margin-bottom:3px}.tool-param label .required{color:var(--accent-red);margin-left:2px}.tool-param label .param-type{color:var(--muted);font-size:.9em;margin-left:4px}.tool-param input{width:100%;padding:8px 10px;border:1px solid var(--border-color);border-radius:4px;background:var(--bg-primary);color:var(--text-primary);font-size:.9em}.tool-param input:focus{outline:none;border-color:var(--accent-blue)}.tools-container{width:100%}.tools-list{display:flex;flex-direction:column;gap:8px}.tool-item{padding:10px;background:var(--bg-primary);border-radius:5px;cursor:pointer;transition:all .2s}.tool-item:hover{background:var(--bg-tertiary)}.tool-item.selected{border:1px solid var(--accent-blue)}.tool-name{color:var(--accent-green);font-weight:500;margin-bottom:5px}.tool-desc{font-size:.85em;color:var(--text-secondary)}.side-panel{display:flex;flex-direction:column;gap:15px}.persona-display{background:var(--bg-primary);padding:12px;border-radius:5px;font-size:.9em;line-height:1.5;max-height:200px;overflow-y:auto;white-space:pre-wrap}.wiki-content{background:var(--bg-primary);padding:12px;border-radius:5px;font-size:.85em;line-height:1.6;max-height:400px;overflow-y:auto;white-space:pre-wrap}.mobile-info-toggle{display:none;position:fixed;top:12px;right:12px;z-index:130;width:40px;height:40px;border-radius:50%;background:var(--primary);border:none;color:var(--darker);font-size:1.1rem;cursor:pointer;box-shadow:0 2px 8px #0000004d;transition:all .2s ease}.mobile-info-toggle:hover{transform:scale(1.05);box-shadow:0 4px 12px #0006}.mobile-info-toggle:active{transform:scale(.95)}.mobile-info-backdrop{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:#00000080;z-index:200;animation:fadeIn .2s ease}.mobile-info-panel{display:none;position:fixed;top:0;right:0;bottom:0;width:85%;max-width:360px;background:var(--bg-secondary);z-index:250;transform:translate(100%);transition:transform .3s ease;flex-direction:column;box-shadow:-4px 0 20px #0000004d}.mobile-info-panel.open{transform:translate(0)}.mobile-info-header{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid var(--border)}.mobile-info-header h3{margin:0;font-size:1.1rem;color:var(--primary)}.close-btn{background:transparent;border:none;color:var(--muted);font-size:1.2rem;cursor:pointer;padding:8px;border-radius:6px;transition:all .2s ease}.close-btn:hover{background:var(--bg-tertiary);color:var(--text)}.mobile-info-tabs{display:flex;border-bottom:1px solid var(--border);padding:0 12px}.tab-btn{flex:1;display:flex;flex-direction:column;align-items:center;gap:4px;padding:12px 8px;background:transparent;border:none;border-bottom:2px solid transparent;color:var(--muted);cursor:pointer;transition:all .2s ease}.tab-btn:hover{color:var(--text)}.tab-btn.active{color:var(--primary);border-bottom-color:var(--primary)}.tab-icon{font-size:1.2rem}.tab-label{font-size:.75rem;font-weight:500}.mobile-info-content{flex:1;overflow-y:auto;padding:16px}.info-section{animation:fadeIn .2s ease}.mobile-info-content .persona-display,.mobile-info-content .wiki-content{background:var(--bg-primary);padding:12px;border-radius:8px;font-size:.9em;line-height:1.5;white-space:pre-wrap;max-height:none;overflow:visible}@media (max-width: 1000px){.mobile-info-toggle{display:flex;align-items:center;justify-content:center}.mobile-info-backdrop{display:block}.mobile-info-panel{display:flex}}@media (max-width: 768px){.mobile-info-toggle{top:10px;right:10px;width:36px;height:36px;font-size:1rem}}@media (max-width: 480px){.mobile-info-panel{width:100%;max-width:none}.mobile-info-toggle{top:8px;right:8px;width:32px;height:32px;font-size:.9rem;box-shadow:0 2px 6px #00000040}.mobile-info-header{padding:12px 16px}.mobile-info-header h3{font-size:1rem}.tab-btn{padding:10px 6px}.tab-icon{font-size:1.1rem}.tab-label{font-size:.7rem}.mobile-info-content{padding:12px}.mobile-info-content .persona-display,.mobile-info-content .wiki-content{font-size:.85em;padding:10px}}.mobile-settings{display:flex;flex-direction:column;gap:16px}.mobile-setting-row{display:flex;justify-content:space-between;align-items:center;padding:12px;background:var(--bg-primary);border-radius:8px}.setting-label{font-size:.9em;font-weight:500;color:var(--text)}.setting-hint{font-size:.75em;color:var(--muted);margin:-8px 0 0;padding-left:4px}.save-status{font-size:.85em;color:var(--accent-green)}.btn-new-trajectory-mobile{width:100%;padding:12px;margin-top:8px;background:var(--primary);color:var(--darker);border:none;border-radius:8px;font-size:.9em;font-weight:600;cursor:pointer;transition:all .2s ease}.btn-new-trajectory-mobile:hover{filter:brightness(1.1)}.mobile-settings .toggle-switch{position:relative;display:inline-block;width:44px;height:24px}.mobile-settings .toggle-switch input{opacity:0;width:0;height:0}.mobile-settings .toggle-slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:var(--text-secondary);transition:.3s;border-radius:24px}.mobile-settings .toggle-slider:before{position:absolute;content:"";height:18px;width:18px;left:3px;bottom:3px;background-color:#fff;transition:.3s;border-radius:50%}.mobile-settings .toggle-switch input:checked+.toggle-slider{background-color:var(--accent-green)}.mobile-settings .toggle-switch input:checked+.toggle-slider:before{transform:translate(20px)}.wiki-section{display:flex;flex-direction:column;height:100%;max-height:calc(100vh - 180px);position:relative;overflow:hidden}.wiki-content-wrapper{flex:1;overflow-y:auto;padding-right:4px;padding-bottom:60px}.policy-qa-tray{position:absolute;bottom:0;left:-16px;right:-16px;background:var(--bg-secondary);border-top:1px solid var(--border);border-radius:16px 16px 0 0;box-shadow:0 -4px 20px #0003;transition:all .3s cubic-bezier(.4,0,.2,1);max-height:56px;overflow:hidden;display:flex;flex-direction:column}.policy-qa-tray.expanded{max-height:70vh}.policy-qa-tray-handle{display:flex;flex-direction:column;align-items:center;padding:8px 16px;cursor:pointer;-webkit-user-select:none;user-select:none;flex-shrink:0}.tray-handle-bar{width:40px;height:4px;background:var(--muted);border-radius:2px;margin-bottom:4px}.tray-handle-label{font-size:.75em;color:var(--muted);font-weight:500}.policy-qa-conversation{flex:1;overflow-y:auto;padding:0 16px 12px;display:flex;flex-direction:column;gap:16px}.qa-empty-state{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:24px;text-align:center;color:var(--muted)}.qa-empty-state span{font-size:2em;margin-bottom:8px}.qa-empty-state p{font-size:.85em;line-height:1.5;margin:0}.qa-exchange{display:flex;flex-direction:column;gap:8px}.qa-question,.qa-answer{padding:10px 12px;border-radius:12px}.qa-question{background:var(--bg-tertiary);align-self:flex-end;max-width:90%}.qa-answer{background:linear-gradient(135deg,var(--bg-primary) 0%,rgba(var(--primary-rgb),.1) 100%);border-left:3px solid var(--primary);max-width:95%}.qa-role{display:block;font-size:.7em;font-weight:600;color:var(--muted);margin-bottom:4px}.qa-question p,.qa-answer p{margin:0;font-size:.85em;line-height:1.5;white-space:pre-wrap}.qa-loading{color:var(--muted);font-style:italic}.policy-qa-tray .policy-qa-input-row{display:flex;gap:8px;padding:12px 16px;border-top:1px solid var(--border);background:var(--bg-secondary);flex-shrink:0}.policy-qa-input{flex:1;padding:10px 12px;border:1px solid var(--border);border-radius:20px;background:var(--bg-primary);color:var(--text);font-size:.85em}.policy-qa-input:focus{outline:none;border-color:var(--primary)}.policy-qa-input:disabled{opacity:.6}.policy-qa-btn{width:40px;height:40px;padding:0;background:var(--primary);color:var(--darker);border:none;border-radius:50%;font-size:1.1em;font-weight:700;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.policy-qa-btn:hover:not(:disabled){filter:brightness(1.1);transform:scale(1.05)}.policy-qa-btn:disabled{opacity:.5;cursor:not-allowed}.confirm-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:#000000b3;display:flex;align-items:center;justify-content:center;z-index:1000;animation:fadeIn .2s ease}.confirm-dialog{background:var(--bg-secondary);padding:25px;border-radius:10px;max-width:400px;width:90%;border:1px solid var(--border-color);animation:fadeIn .2s ease}.confirm-dialog h3{color:var(--primary);margin-bottom:15px}.confirm-dialog p{color:var(--text-secondary);margin-bottom:20px;line-height:1.5}.confirm-dialog-buttons{display:flex;gap:10px;justify-content:flex-end}.main-content{display:grid;grid-template-columns:1fr 380px;gap:24px}@media (max-width: 1200px){.main-content{grid-template-columns:1fr 350px;gap:20px}}@media (max-width: 1000px){.main-content{grid-template-columns:1fr}.main-content .side-panel{display:none}}@media (max-width: 768px){.main-content{gap:0}}@media (max-width: 480px){.main-content{gap:0}}.simulation-page{animation:fadeIn .3s ease}.simulation-header{display:flex;align-items:center;gap:12px;padding:12px 0;margin-bottom:16px;border-bottom:1px solid var(--border)}.header-spacer{flex:1}.trajectory-badge{background:var(--bg-tertiary);border:1px solid var(--border);border-radius:20px;padding:6px 14px;font-size:.85rem;color:var(--muted);font-family:SF Mono,Fira Code,monospace}.simulation-header .status-badge{display:inline-flex;align-items:center;gap:4px;padding:6px 12px;border-radius:20px;font-size:.8rem;font-weight:600}.simulation-header .status-badge.complete{background:#22c55e33;color:#22c55e}.simulation-header .status-badge.incomplete{background:#9ca3af26;color:var(--muted)}@media (max-width: 768px){.simulation-page{padding-top:50px;height:100vh;height:100dvh;display:flex;flex-direction:column;overflow:hidden}.simulation-page .main-content{flex:1;min-height:0;overflow:hidden}.simulation-header{position:fixed;top:0;left:0;right:0;z-index:120;background:var(--bg-primary);padding:10px 12px;margin-bottom:0;border-bottom:1px solid var(--border)}}.simulation-loading,.simulation-error{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;text-align:center;gap:16px}.simulation-loading .spinner{width:48px;height:48px;border:4px solid var(--border);border-top-color:var(--primary);border-radius:50%;animation:spin 1s linear infinite}.simulation-loading p{color:var(--muted);font-size:1rem}.simulation-error h2{color:var(--accent-red);font-size:1.3rem}.simulation-error p{color:var(--muted);max-width:400px;line-height:1.5}@media (max-width: 768px){.trajectory-badge{font-size:.75rem;padding:4px 10px}.simulation-header .status-badge{font-size:.7rem;padding:4px 8px}.simulation-header .btn{padding:6px 10px;font-size:.85rem}.simulation-header .btn-back{padding:6px 12px}}@media (max-width: 480px){.simulation-page{padding-top:46px;height:100vh;height:100dvh}.simulation-header{padding:8px 10px;gap:8px}.trajectory-badge{font-size:.7rem;padding:4px 8px}.simulation-header .btn-back{padding:6px 10px;font-size:.85rem}}:root{--primary: #2DD4A7;--primary-light: #5EECC5;--primary-dark: #1FB892;--secondary: #3B82F6;--accent: #F472B6;--dark: #1A1A1A;--darker: #121212;--card-bg: #242424;--text: #FFFFFF;--text-secondary: #E5E5E5;--muted: #9CA3AF;--border: rgba(255,255,255,.1);--bg-primary: var(--darker);--bg-secondary: var(--dark);--bg-tertiary: var(--card-bg);--accent-blue: var(--secondary);--accent-green: var(--primary);--accent-yellow: #ffc107;--accent-red: #f44336;--accent-purple: var(--accent);--text-primary: var(--text);--border-color: var(--border);--sidebar-width: 240px;--sidebar-collapsed-width: 70px}*{margin:0;padding:0;box-sizing:border-box}html{height:100%;height:100dvh}body{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background-color:var(--bg-primary);color:var(--text-primary);min-height:100%;min-height:100dvh;overflow:hidden;position:fixed;width:100%}#root{height:100%;height:100dvh;overflow:auto}.container{max-width:1600px;margin:0 auto;padding:20px}.simulator-page{max-width:1600px;margin:0 auto}.hidden{display:none!important}@keyframes fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes spin{to{transform:rotate(360deg)}}@keyframes slideIn{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}@keyframes dots{0%,20%{content:""}40%{content:"."}60%{content:".."}80%,to{content:"..."}}@media (max-width: 768px){:root{--sidebar-width: 260px}.container{padding:16px}.simulator-page{padding-top:0}}@media (max-width: 480px){.container{padding:12px}.simulator-page{padding-top:0}}
